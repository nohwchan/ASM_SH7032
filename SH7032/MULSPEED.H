;----------SIMULATION SIGNAL FOR TEST MULTI SPEED--------
;	MOV SEC2,R1
;	MOV.W @R1,R1
;	MOV R1,R2
;	MOV #20,R3
;	MOV R3,R4
;	DIVS R3,R2
;	MULS R2,R4
;	STS  MACL,R2
;	NEG  R2,R2
;	ADD  R2,R1
;	MOV #6,R2
;	CMP/GT R2,R1
;	BF  NOX
;	MOV #13,R2
;	CMP/GT R2,R1
;	BF  X1
;	MOV #B'100,R0
;	BRA BEGIN
;	NOP
;NOX:	MOV #B'0,R0
;	BRA BEGIN
;	NOP
;X1:	MOV #B'1000,R0
;---------------------------------------------------
	MOV INP2,R1
	MOV.W @R1,R0

BEGIN:	AND #B'00001100,R0	;MASK BIT FOR CHECK X1,X2(MUL_SP1,MUL_SP2)
	TST #B'1000,R0		;TEST X1(0 OR 1)
	BT  CHK_X2		 
	TST #B'100,R0		;TEST X2(0 OR 1)  
	BF  RE_FLAST		;IF X1=1 AND X2=1 THEN JMP TO OUT_MUL(FSET NOT CHANGE) 
	MOV MUL_SP1,R1		;ELSE CHANGE FSET (FSET=MUL_SP1)
	MOV.W @R1,R0
	MOV FSET_3,R1
	MOV.W R0,@R1
	MOV RSTATUS2,R1
	MOV.B @R1,R0
	OR  #B'10000000,R0
	MOV.B R0,@R1		;SET EXTERNAL SPEED FLAG 
	BRA OUT_MUL
	NOP
CHK_X2:
	TST #B'100,R0		;TEST X2
	BT  RE_FLAST		;IF X1=0 AND X2=0 THEN JMP TO OUT_MUL(FSET NOT CHANGE)		
	MOV MUL_SP2,R1		;ELSE CHANGE FSET (FSET = MUL_SP2)
	MOV.W @R1,R0
	MOV FSET_3,R1
	MOV.W R0,@R1
	MOV RSTATUS2,R1
	MOV.B @R1,R0
	OR  #B'10000000,R0
	MOV.B R0,@R1		;SET EXTERNAL SPEED FLAG 
	BRA OUT_MUL
	NOP

RE_FLAST:
	MOV FLAST_2,R1
	MOV.W @R1,R1
	MOV FSET_3,R0
	MOV.W R1,@R0
	BRA OUT_MUL
	NOP
		.ALIGN 4
INP2:		.DATA.L INPORT	
SFLG1:		.DATA.L SYSFLG
FSET_3:		.DATA.L FSET
FLAST_2:	.DATA.L FLAST
;FRUN_3:	.DATA.L FRUN
PSTATUS3:	.DATA.L _P_STATUS
RSTATUS2:	.DATA.L _R_STATUS
MUL_SP1:	.DATA.L _MUL_SP1
MUL_SP2:	.DATA.L _MUL_SP2
SEC2:		.DATA.L SEC
OUT_MUL:
