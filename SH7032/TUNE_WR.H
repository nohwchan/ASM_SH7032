;********************************************
;-----WRITE TUNNING PARAMETER TO EEPROM-----*
;********************************************
	MOV TSTATUS,R1
	MOV.B @R1,R0
	TST #B'1000000,R0
	BF  TUNE_WR
	BRA OUT_TUNE_WR
	NOP
TUNE_WR:
	MOV NUMBER,R5
	MOV.B @R5,R0
	ADD #1,R0
	MOV.B R0,@R5

	CMP/EQ #1,R0
	BT  NOT_WRITE

	CMP/EQ #2,R0
	BT  RS_WRITE
	CMP/EQ #3,R0
	BT  LS_WRITE
	CMP/EQ #4,R0
	BT  pLS_WRITE
	CMP/EQ #5,R0
	BT  RR_WRITE
	CMP/EQ #6,R0
	BT  LR_WRITE
	CMP/EQ #7,R0
	BT  TS_WRITE
	CMP/EQ #8,R0
	BT  TR_WRITE
	CMP/EQ #9,R0
	BT  ROT_WRITE
	CMP/EQ #10,R0
	BT  ISD_WRITE
	CMP/EQ #11,R0
	BT  IDQSCL_WRITE

ISQ_WRITE:
	MOV ISQ,R1
	MOV @R1,R10
	MOV #110,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP

	MOV TSTATUS,R1
	MOV.B @R1,R0
	AND #B'10111111,R0
	MOV.B R0,@R1

	MOV NUMBER,R5
	MOV.B @R5,R0
	MOV #0,R0
	MOV.B R0,@R5

	LDS.L @SP+,PR
	RTS
	NOP	

LR_WRITE:
	MOV LROTOR1,R1
	MOV.W @R1,R10
	MOV #109,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	
NOT_WRITE:
	LDS.L @SP+,PR
	RTS
	NOP
RS_WRITE:
	MOV RSTATOR1,R1
	MOV.W @R1,R10
	MOV #105,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

LS_WRITE:
	MOV LSTATOR1,R1
	MOV.W @R1,R10
	MOV #106,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

pLS_WRITE:
	MOV SIGMA_L1,R1
	MOV.W @R1,R10
	MOV #107,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

RR_WRITE:
	MOV RROTOR1,R1
	MOV.W @R1,R10
	MOV #108,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

ISD_WRITE:
	MOV ISD,R1
	MOV @R1,R10
	MOV #111,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

TS_WRITE:
	MOV TS,R1
	MOV.W @R1,R10
	MOV #114,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

TR_WRITE:
	MOV TR,R1
	MOV.W @R1,R10
	MOV #113,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

ROT_WRITE:
	MOV ROT,R1
	MOV.W @R1,R10
	MOV #112,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	

IDQSCL_WRITE:
	MOV IDQSCL9_,R1
	MOV.W @R1,R10
	MOV #115,R11
	MOV EEWRITE,R14
	JSR @R14;EE_WR
	NOP
	LDS.L @SP+,PR
	RTS
	NOP	
	
	.ALIGN 4
TSTATUS:	.DATA.L _T_STATUS
NUMBER:		.DATA.L NUM_BER
RSTATOR1:	.DATA.L _R_STATOR
LSTATOR1:	.DATA.L _L_STATOR
SIGMA_L1:	.DATA.L _SIGMA_L
RROTOR1:	.DATA.L _R_ROTOR
LROTOR1:	.DATA.L _L_ROTOR
TS:		.DATA.L	STATOR_T
TR:		.DATA.L	ROTOR_T
ROT:		.DATA.L	R_L
ISD:		.DATA.L	_ISD_RATED
ISQ:		.DATA.L	_ISQ_RATED
EEWRITE:	.DATA.L EE_WR
IDQSCL9_:	.DATA.L IDQSCL9
	.ALIGN 4
OUT_TUNE_WR:
